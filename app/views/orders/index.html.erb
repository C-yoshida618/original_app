<%= render "shared/header" %>

<main id="order">
<h1>Confirm your Order</h1>
<p>購入内容の確認</p>
<p>※ご注文の確認は画面下の Order ボタンをクリックしてください</p>

<div class="product-confirmation">
  <div class="product order ">
        <% if @product.image_url.attached? %>
          <%= image_tag product.image_url %>
        <% else %>
          <%= image_tag "product1.jpg" %>
        <% end %>
  </div>
  <div class="product-details">
    <h2><%= @product.product_name %></h2>
    <p>¥<%= @product.price %>(※送料別)</p>
    <p>送料　※———円</p>
    <p>お支払い金額</p>
    <p>¥———</p>
  </div>
</div>

<h2>クレジットカード情報入力</h2>
<div class="credit-card-form">
  <%= form_with url: product_orders_path(@product), method: :post do |f| %>
    <div class="field">
      <%= f.label :card_number, "カード番号", class: "required" %>
      <%= f.text_field :card_number, required: true %>
    </div>

    <div class="field">
      <%= f.label :expiration_date, "有効期限", class: "required" %>
      <%= f.text_field :expiration_date, required: true, placeholder: "月 / 年" %>
    </div>

    <div class="field">
      <%= f.label :security_code, "セキュリティコード", class: "required" %>
      <%= f.text_field :security_code, required: true, placeholder: "CVC" %>
    </div>

      <%# 配送先の入力 %>
      <div class='shipping-address-form'>
        <p class='info-input-haedline'>
          配送先入力
        </p>
        <div class="form-group">
          <div class='form-text-wrap'>
            <label class="form-text">郵便番号</label>
            <span class="indispensable">必須</span>
          </div>
          <%= f.text_field :postal_code, class:"input-default", id:"postal-code", placeholder:"例）123-4567", maxlength:"8" %>
        </div>
        <div class="form-group">
          <div class='form-text-wrap'>
            <label class="form-text">都道府県</label>
            <span class="indispensable">必須</span>
          </div>
          <%= f.collection_select(:prefecture_id, Prefecture.all, :id, :name, {}, {class:"select-box", id:"prefecture_id"}) %>
        </div>
        <div class="form-group">
          <div class='form-text-wrap'>
            <label class="form-text">市区町村</label>
            <span class="indispensable">必須</span>
          </div>
          <%= f.text_field :city, class:"input-default", id:"city", placeholder:"例）渋谷区"%>
        </div>
        <div class="form-group">
          <div class='form-text-wrap'>
            <label class="form-text">番地</label>
            <span class="indispensable">必須</span>
          </div>
          <%= f.text_field :block, class:"input-default", id:"addresses", placeholder:"例）神宮前1-1-1"%>
        </div>
        <div class="form-group">
          <div class='form-text-wrap'>
            <label class="form-text">建物名</label>
            <span class="form-any">任意</span>
          </div>
          <%= f.text_field :building, class:"input-default", id:"building", placeholder:"例）青ビル103"%>
        </div>
        <div class="form-group">
          <div class='form-text-wrap'>
            <label class="form-text">電話番号</label>
            <span class="indispensable">必須</span>
          </div>
          <%= f.text_field :phone_number, class:"input-default", id:"phone_number", placeholder:"例）09012345678", maxlength:"11"%>
        </div>
      </div>
      <%# /配送先の入力 %>
      
      <div class='buy-btn'>
        <%= f.submit "BUY NOW" , class:"buy-red-btn", id:"button" %>
      </div>
    <% end %>
  </div>
</div>
<%= render "shared/footer" %>
